# java-filmorate

## Описание проекта

Приложение представляет собой социальную сеть для просмотра фильмов по своим предпочтениям и рекомендациям друзей.

### Использованные технологии:

Java 11+, REST API, Spring Boot, Maven, Lombok, H2

### Функционал приложения:
Приложение предоставляет возможность:

    Добавлять\редактировать\удалять пользователей\фильмы
    Оставлять отзывы на фильмы
    Добавлять\убирать лайки фильмам
    Добавлять\удалять друзей
    Просматривать общих друзей
    Просматривать ленту событий по действиям друзей
    Формировать рекомендации к просмотру фильмов

### ER диаграмма базы данных приложения: 

![БД filmorate.png](src/БД%20Filmorate.png)

### Таблицы

1. FILM - содержит в себе всю информацию по фильмам. 
2. FILM_GENRE - содержит в себе перечень всех жанров фильма по всем фильмам таблицы. Так же имеет связь с таблицей
   Genre (многие к одному)
3. GENRE - Перечень всевозможных жанров
4. LIKES содержит в себе список id пользователей которые отметили фильм 
5. USERS - содержит в себе всю информацию по пользователям .
6. FRIENDSHIP - список всех потвержденных и непотвержденных друзей соответствено
7. MPA - Таблица рейтинга фильмов
8. REVIEW - содержит в себе обзоры фильмов
9. REVIEW_LIKE - содержит в себе оценки обзоров
10. FEED - содержит  в себе действие пользователей
11. DIRECTOR - содержит в себе перечень режисеров фильмов
12. FILM_DIRECTOR - содержит в себе связи между филмами и режисерами
   Примеры запросов в SQL
   Выборка всех популярных фильмов с ограничением:

```sql
SELECT F.name,
       COUNT(ID) as pop
FROM LIKES
        LEFT JOIN FILM F on F.ID = LIKES.FILM_ID 
GROUP BY name
ORDER BY pop DESC
LIMIT 10
```

Получение общих друзей по id2, id1:

```sql
SELECT ID, NAME, LOGIN, BIRTHDAY,EMAIL FROM USERS
    WHERE ID IN 
          (SELECT F1.FRIEND_ID FROM FRIENDSHIP AS F1
             INNER JOIN FRIENDSHIP AS F2 ON F1.FRIEND_ID = F2.FRIEND_ID
             WHERE F1.USER_ID = :USERID AND F2.USER_ID = :FRIEND_ID
          )          
```
### Над функционалом работали

**Галеев Александр,**
**Плотникова Мария,** 
**Лоренц Кристина,** 
**Мустафин Артём.**



